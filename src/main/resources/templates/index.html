<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>검색 엔진</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <!-- 헤더 -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <i class="fas fa-search me-2"></i>
                    검색 엔진
                </a>
            </div>
        </nav>

        <!-- 메인 검색 영역 -->
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="search-container">
                        <div class="text-center mb-5">
                            <h1 class="display-4 text-primary mb-3">
                                <i class="fas fa-search"></i>
                                스마트 검색
                            </h1>
                            <p class="lead text-muted">원하는 정보를 빠르고 정확하게 찾아보세요</p>
                        </div>

                        <!-- 검색 폼 -->
                        <form th:action="@{/search}" th:object="${searchRequest}" method="post" class="search-form">
                            <div class="search-input-container position-relative mb-4">
                                <div class="input-group input-group-lg">
                                    <span class="input-group-text bg-white border-end-0">
                                        <i class="fas fa-search text-muted"></i>
                                    </span>
                                    <input type="text" 
                                           th:field="*{query}" 
                                           class="form-control border-start-0 search-input" 
                                           placeholder="검색어를 입력하세요..."
                                           autocomplete="off"
                                           id="searchInput">
                                    <button class="btn btn-primary px-4" type="submit">
                                        <i class="fas fa-search me-2"></i>검색
                                    </button>
                                </div>
                                
                                <!-- 자동완성 드롭다운 -->
                                <div id="autocompleteDropdown" class="autocomplete-dropdown"></div>
                                
                                <!-- 에러 메시지 -->
                                <div th:if="${#fields.hasErrors('query')}" class="text-danger mt-2">
                                    <small th:errors="*{query}"></small>
                                </div>
                            </div>

                            <!-- 고급 검색 옵션 -->
                            <div class="advanced-search-toggle text-center mb-3">
                                <button type="button" class="btn btn-link text-decoration-none" 
                                        data-bs-toggle="collapse" data-bs-target="#advancedSearch">
                                    <i class="fas fa-cog me-1"></i>고급 검색 옵션
                                    <i class="fas fa-chevron-down ms-1"></i>
                                </button>
                            </div>

                            <div class="collapse" id="advancedSearch">
                                <div class="card border-0 shadow-sm">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label for="category" class="form-label">카테고리</label>
                                                <select th:field="*{category}" class="form-select" id="category">
                                                    <option value="">전체 카테고리</option>
                                                    <option th:each="cat : ${categories}" 
                                                            th:value="${cat}" 
                                                            th:text="${cat}"></option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="author" class="form-label">작성자</label>
                                                <select th:field="*{author}" class="form-select" id="author">
                                                    <option value="">전체 작성자</option>
                                                    <option th:each="auth : ${authors}" 
                                                            th:value="${auth}" 
                                                            th:text="${auth}"></option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <!-- 인기 검색어 -->
                        <div class="popular-searches mt-5">
                            <h5 class="text-muted mb-3">
                                <i class="fas fa-fire text-warning me-2"></i>인기 검색어
                            </h5>
                            <div class="d-flex flex-wrap gap-2">
                                <span class="badge bg-light text-dark border popular-tag">스프링부트</span>
                                <span class="badge bg-light text-dark border popular-tag">엘라스틱서치</span>
                                <span class="badge bg-light text-dark border popular-tag">몽고디비</span>
                                <span class="badge bg-light text-dark border popular-tag">자바</span>
                                <span class="badge bg-light text-dark border popular-tag">웹개발</span>
                                <span class="badge bg-light text-dark border popular-tag">데이터베이스</span>
                            </div>
                        </div>

                        <!-- 통계 정보 -->
                        <div class="stats-section mt-5">
                            <div class="row text-center">
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <i class="fas fa-file-alt text-primary mb-2"></i>
                                        <h4 class="text-primary">1,234</h4>
                                        <p class="text-muted">총 문서 수</p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <i class="fas fa-search text-success mb-2"></i>
                                        <h4 class="text-success">5,678</h4>
                                        <p class="text-muted">총 검색 수</p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <i class="fas fa-users text-info mb-2"></i>
                                        <h4 class="text-info">890</h4>
                                        <p class="text-muted">활성 사용자</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="bg-light mt-5 py-4">
        <div class="container text-center">
            <p class="text-muted mb-0">
                &copy; 2024 검색 엔진. Made with 
                <i class="fas fa-heart text-danger"></i> 
                using Spring Boot, Elasticsearch & MongoDB
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/search.js"></script>
</body>
</html> 